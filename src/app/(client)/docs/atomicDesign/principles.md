# Atomic Design 規約

## 1. 全体ルール

### 1-1. 依存方向

- 依存は **下位 → 上位** のみ許可する：
```text
  atoms → molecules → organisms → templates → pages
```
* 各階層は直下の階層にのみ依存することを推奨する。

### 1-2. ロジック配置

以下のロジックは UI コンポーネントから分離し、**pages または専用 hooks / services** に集約する：

* バリデーション
* 副作用（API 呼び出し、ルーティング等）
* データ変換・整形
* 外部リソースのフェッチ

### 1-3. ドメイン知識の扱い

* **atoms / molecules はドメイン知識を持たない**
* **organisms は「表示するデータの形」までのドメイン依存を許容するが、ロジックは持たない**
* **pages / hooks / services にドメイン知識とロジックを閉じ込める**

### 1-4. props の方針

* 下位コンポーネントは、上位で計算された **「値」と「イベントハンドラ」だけ** を受け取る。
* 値の意味解釈・条件分岐・状態遷移は pages / hooks 側で行う。
* atoms / molecules / organisms は、props をそのまま描画に利用することを基本とする。

## 2. 各階層の意味（役割・例・CSS 責務）

### 2-1. atoms

**役割**

* 最小単位の UI 要素。
* 見た目（色・余白・border・hover 等）のみ責務を持つ。
* **ドメイン知識を持たない。**
* **バリデーション処理等のロジックを持たない。**

**例**

* Button（見た目のみのボタン）
* Label（テキストラベル）
* Input（見た目のみの入力欄）

**CSS 責務**

* 単一要素の見た目のみを定義する
* レイアウトは持たない。

---

### 2-2. molecules

**役割**

* 複数の atoms を組み合わせて、**1つの UI 行動単位**を構成する。
* 「意味ある UI ブロック」を作るが、**ドメイン固有の意味は持たない。**
* **バリデーション処理等のロジックを持たない。**

**例**

* Label + Input の 1 グループ
* アイコン付きボタン
* エラーメッセージ表示付きの入力欄（エラーメッセージ自体は props として受け取るだけ）
* ラジオボタングループ（選択状態は props から受け取る）

**CSS 責務**

* コンポーネント内部のみで完結する最小単位ブロック化。

---

### 2-3. organisms

**役割**

* カード一覧・検索エリア・フォーム全体など、「画面機能の一部」を構成する。
* **ドメイン依存は「表示するデータの形」まで許容する**

**例**

* PersonaForm（フォーム全体）
* CardList（カードの一覧）
* HeaderBlock（ヘッダー全体）

**CSS 責務**

* ブロック内部のレイアウト（複数 molecules / atoms の配置）。
* ブロック単位での余白・内側の配置（`padding`・`gap`・`flex`・`grid`）。

---

### 2-4. templates

**役割**

* organisms をページ内に配置し、**ページの骨格構造・レイアウト**を定義する。
* ページ固有の状態は持たず、SSR/CSR の知識も持たない。
* **UI 構造の定義にのみ責務を持つ。**

**例**

* PersonaCreateTemplate（フォーム＋ヘッダー＋フッターを配置した画面レイアウト）
* DashboardTemplate（サイドバー＋メインコンテンツの画面レイアウト）
* AuthLoginTemplate（ブランドイメージ＋フォームの画面レイアウト）

**CSS 責務**

* ページ全体のレイアウトを定義（`min-h-screen`、`flex`、`grid` 等）。
* 背景色や全体の余白など、ページレベルの見た目。

---

### 2-5. pages

**役割**

* **唯一の状態・副作用を持つ場所。**
* ルーティング制御。
* データ取得（API 呼び出し）。
* バリデーション・イベント処理。
* templates / organisms にデータとイベントハンドラを渡し、UI を完成させる。

**例**

* `PersonaCreatePage`

  * フォーム状態の管理
  * バリデーション
  * Persona 作成 API 呼び出し
  * 成功時の画面遷移

* `DashboardPage`

  * ダッシュボードデータ取得
  * ローディング・エラー状態管理

**CSS 責務**

* **CSS を記述しない。**
