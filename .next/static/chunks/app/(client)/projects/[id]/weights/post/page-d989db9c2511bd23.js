(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{1909:(e,t,r)=>{Promise.resolve().then(r.bind(r,9026))},9026:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(5239),i=r(2115),n=r(63);function c(){let e=(0,n.useParams)().id,t=(0,n.useRouter)(),[r,c]=(0,i.useState)([]),[l,o]=(0,i.useState)("");(0,i.useEffect)(()=>{e&&(async()=>{try{let t=await fetch("/api/projects/".concat(e,"/weights/generate"));if(!t.ok)throw Error("配点割合生成に失敗しました");let r=await t.json();r&&Array.isArray(r)?c(r):(console.error("weights が配列ではありません:",r),c([]))}catch(e){console.error(e),o("配点割合生成に失敗しました")}})()},[e]);let d=(e,t,s)=>{let a=[...r];"weightPercent"===t?a[e][t]=parseInt(s)||0:a[e][t]=s,c(a)},h=async s=>{if(s.preventDefault(),r.some(e=>""===e.area.trim()))return void o("対象分野を入力してください");let a=r.reduce((e,t)=>e+t.weightPercent,0);if(100!==a){let e=a-100;e>0?o("配点割合の合計が100%を超えています（+".concat(e,"%）")):o("配点割合の合計が100%に不足しています（".concat(e,"%）"));return}o("");try{await fetch("/api/projects/".concat(e,"/weights"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t.push("/projects/".concat(e,"/steps/post"))}catch(e){console.error("保存または生成エラー:",e),o("保存または生成に失敗しました")}};return(0,s.jsx)("div",{className:"min-h-screen min-w-screen bg-[#EBEEF1] flex justify-center text-gray-950",children:(0,s.jsx)("div",{className:"p-6 bg-white relative",style:{width:"335px",height:"752px",marginTop:"30px"},children:(0,s.jsxs)("form",{onSubmit:h,className:"grid",style:{width:"295px",rowGap:"24px",marginTop:"30px"},children:[(0,s.jsxs)("div",{className:"text-center font-medium",children:["スケジュール生成のために",(0,s.jsx)("br",{}),"試験の配点割合を",(0,s.jsx)("br",{}),"教えてください"]}),(0,s.jsxs)("div",{className:"grid",style:{gridTemplateRows:"auto auto",rowGap:"8px",borderRadius:"0px",height:"344px"},children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 font-semibold text-center border-b",children:[(0,s.jsx)("div",{children:"対象分野"}),(0,s.jsx)("div",{children:"配点割合"})]}),(0,s.jsx)("div",{style:{overflowY:"auto",height:"calc(344px - 24px)"},children:Array.isArray(r)&&r.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-2",children:[(0,s.jsx)("input",{type:"text",value:e.area,onChange:e=>d(t,"area",e.target.value),placeholder:"分野名",className:"p-2 border text-gray-950",style:{borderRadius:"0px",width:"144px"}}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"number",value:e.weightPercent,onChange:e=>d(t,"weightPercent",e.target.value),className:"p-2 border text-right text-gray-950",style:{borderRadius:"0px",width:"56px"},min:0,max:100}),(0,s.jsx)("span",{className:"ml-1",children:"%"}),(0,s.jsx)("div",{style:{minWidth:"24px",marginLeft:"4px"},children:r.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{c(r.filter((e,r)=>r!==t))},className:"text-red-500 font-bold",style:{minWidth:"24px"},children:(0,s.jsx)(a.default,{src:"/createWeights/trashBox.svg",alt:"delete Weight",width:24,height:24,className:"cursor-pointer hover:opacity-80"})})})]})]},t))})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>{c([...r,{area:"",weightPercent:0}])},className:"font-semibold",style:{borderRadius:"0px"},children:(0,s.jsx)(a.default,{src:"/createWeights/plusButton.svg",alt:"Add Weight",width:45,height:45,className:"cursor-pointer hover:opacity-80"})})}),l&&(0,s.jsx)("p",{className:"text-red-500 text-sm text-center",children:l}),(0,s.jsx)("button",{type:"submit",className:"font-semibold transition absolute left-1/2 transform -translate-x-1/2",style:{width:"226px",height:"60px",borderRadius:"0px",backgroundColor:"#3C436D",color:"#FFFFFF",top:"611px"},children:"決定"})]})})})}}},e=>{e.O(0,[394,441,493,358],()=>e(e.s=1909)),_N_E=e.O()}]);