{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/personas.ts"],"sourcesContent":["import { pgTable, uuid, decimal, pgEnum } from \"drizzle-orm/pg-core\";\r\nimport { start } from \"repl\";\r\n\r\nexport const learningEnum = pgEnum(\"learningEnum\", [\r\n  \"インプット先行パターン\",\r\n  \"アウトプット先行パターン\",\r\n]);\r\n\r\nexport const personas = pgTable(\"persona\", {\r\n  personaId: uuid(\"personaId\").primaryKey().defaultRandom(),\r\n  weekdayHours: decimal(\"weekdayHours\", { precision: 3, scale: 1 }).notNull(),\r\n  weekendHours: decimal(\"weekendHours\", { precision: 3, scale: 1 }).notNull(),\r\n  learningPattern: learningEnum(\"learningPattern\")\r\n    .notNull()\r\n    .default(\"インプット先行パターン\"),\r\n});\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;;AAGO,MAAM,eAAe,IAAA,2KAAM,EAAC,gBAAgB;IACjD;IACA;CACD;AAEM,MAAM,WAAW,IAAA,kKAAO,EAAC,WAAW;IACzC,WAAW,IAAA,yKAAI,EAAC,aAAa,UAAU,GAAG,aAAa;IACvD,cAAc,IAAA,+KAAO,EAAC,gBAAgB;QAAE,WAAW;QAAG,OAAO;IAAE,GAAG,OAAO;IACzE,cAAc,IAAA,+KAAO,EAAC,gBAAgB;QAAE,WAAW;QAAG,OAAO;IAAE,GAAG,OAAO;IACzE,iBAAiB,aAAa,mBAC3B,OAAO,GACP,OAAO,CAAC;AACb","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/projects.ts"],"sourcesContent":["import { pgTable, uuid, pgEnum, varchar, date } from \"drizzle-orm/pg-core\";\r\nimport { personas } from \"./personas\";\r\n\r\nexport const baseMaterial = pgEnum(\"baseMaterial\", [\"TEXTBOOK\", \"VIDEO\"]);\r\n\r\nexport const projects = pgTable(\"project\", {\r\n  projectId: uuid(\"projectId\").primaryKey().defaultRandom(),\r\n  personaId: uuid(\"personaId\")\r\n    .notNull()\r\n    .references(() => personas.personaId),\r\n  certificationName: varchar(\"certificationName\").notNull(),\r\n  examDate: date(\"examDate\").notNull(),\r\n  startDate: date(\"startDate\").notNull(),\r\n  baseMaterial: baseMaterial(\"baseMaterial\").notNull().default(\"TEXTBOOK\"),\r\n});\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,MAAM,eAAe,IAAA,2KAAM,EAAC,gBAAgB;IAAC;IAAY;CAAQ;AAEjE,MAAM,WAAW,IAAA,kKAAO,EAAC,WAAW;IACzC,WAAW,IAAA,yKAAI,EAAC,aAAa,UAAU,GAAG,aAAa;IACvD,WAAW,IAAA,yKAAI,EAAC,aACb,OAAO,GACP,UAAU,CAAC,IAAM,2JAAQ,CAAC,SAAS;IACtC,mBAAmB,IAAA,+KAAO,EAAC,qBAAqB,OAAO;IACvD,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO;IAClC,WAAW,IAAA,yKAAI,EAAC,aAAa,OAAO;IACpC,cAAc,aAAa,gBAAgB,OAAO,GAAG,OAAO,CAAC;AAC/D","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/steps.ts"],"sourcesContent":["import {\r\n  pgTable,\r\n  uuid,\r\n  varchar,\r\n  text,\r\n  date,\r\n  integer,\r\n} from \"drizzle-orm/pg-core\";\r\nimport { projects } from \"./projects\";\r\n\r\nexport const steps = pgTable(\"step\", {\r\n  stepId: uuid(\"stepId\").primaryKey().defaultRandom(),\r\n  projectId: uuid(\"projectId\")\r\n    .notNull()\r\n    .references(() => projects.projectId),\r\n  title: varchar(\"title\").notNull(),\r\n  theme: text(\"theme\"),\r\n  startDate: date(\"startDate\"),\r\n  endDate: date(\"endDate\"),\r\n  index: integer(\"index\").notNull().default(0),\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;AAEO,MAAM,QAAQ,IAAA,kKAAO,EAAC,QAAQ;IACnC,QAAQ,IAAA,yKAAI,EAAC,UAAU,UAAU,GAAG,aAAa;IACjD,WAAW,IAAA,yKAAI,EAAC,aACb,OAAO,GACP,UAAU,CAAC,IAAM,2JAAQ,CAAC,SAAS;IACtC,OAAO,IAAA,+KAAO,EAAC,SAAS,OAAO;IAC/B,OAAO,IAAA,yKAAI,EAAC;IACZ,WAAW,IAAA,yKAAI,EAAC;IAChB,SAAS,IAAA,yKAAI,EAAC;IACd,OAAO,IAAA,+KAAO,EAAC,SAAS,OAAO,GAAG,OAAO,CAAC;AAC5C","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/tasks.ts"],"sourcesContent":["import {\r\n  pgTable,\r\n  uuid,\r\n  varchar,\r\n  text,\r\n  date,\r\n  pgEnum,\r\n} from \"drizzle-orm/pg-core\";\r\nimport { steps } from \"./steps\";\r\n\r\nexport const taskStatus = pgEnum(\"taskStatus\", [\r\n  \"undo\",\r\n  \"doing\",\r\n  \"done\",\r\n  \"blocked\",\r\n]);\r\n\r\nexport const tasks = pgTable(\"task\", {\r\n  taskId: uuid(\"taskId\").primaryKey().defaultRandom(),\r\n  stepId: uuid(\"stepId\")\r\n    .notNull()\r\n    .references(() => steps.stepId),\r\n  title: varchar(\"title\").notNull(),\r\n  theme: text(\"description\").notNull(),\r\n  startDate: date(\"startDate\").notNull(),\r\n  endDate: date(\"endDate\").notNull(),\r\n  taskStatus: taskStatus(\"taskStatus\").notNull().default(\"undo\"),\r\n});\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;AAEO,MAAM,aAAa,IAAA,2KAAM,EAAC,cAAc;IAC7C;IACA;IACA;IACA;CACD;AAEM,MAAM,QAAQ,IAAA,kKAAO,EAAC,QAAQ;IACnC,QAAQ,IAAA,yKAAI,EAAC,UAAU,UAAU,GAAG,aAAa;IACjD,QAAQ,IAAA,yKAAI,EAAC,UACV,OAAO,GACP,UAAU,CAAC,IAAM,qJAAK,CAAC,MAAM;IAChC,OAAO,IAAA,+KAAO,EAAC,SAAS,OAAO;IAC/B,OAAO,IAAA,yKAAI,EAAC,eAAe,OAAO;IAClC,WAAW,IAAA,yKAAI,EAAC,aAAa,OAAO;IACpC,SAAS,IAAA,yKAAI,EAAC,WAAW,OAAO;IAChC,YAAY,WAAW,cAAc,OAAO,GAAG,OAAO,CAAC;AACzD","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/weights.ts"],"sourcesContent":["import { pgTable, uuid, varchar, integer } from \"drizzle-orm/pg-core\";\r\nimport { projects } from \"./projects\";\r\n\r\nexport const weights = pgTable(\"weight\", {\r\n  weightId: uuid(\"weightId\").primaryKey().defaultRandom(),\r\n  projectId: uuid(\"projectId\")\r\n    .notNull()\r\n    .references(() => projects.projectId),\r\n  area: varchar(\"area\").notNull(),\r\n  weightPercent: integer(\"weightPercent\").notNull().default(0),\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,MAAM,UAAU,IAAA,kKAAO,EAAC,UAAU;IACvC,UAAU,IAAA,yKAAI,EAAC,YAAY,UAAU,GAAG,aAAa;IACrD,WAAW,IAAA,yKAAI,EAAC,aACb,OAAO,GACP,UAAU,CAAC,IAAM,2JAAQ,CAAC,SAAS;IACtC,MAAM,IAAA,+KAAO,EAAC,QAAQ,OAAO;IAC7B,eAAe,IAAA,+KAAO,EAAC,iBAAiB,OAAO,GAAG,OAAO,CAAC;AAC5D","debugId":null}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/relations.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\r\nimport { projects } from \"./projects\";\r\nimport { personas } from \"./personas\";\r\nimport { steps } from \"./steps\";\r\nimport { tasks } from \"./tasks\";\r\nimport { weights } from \"./weights\";\r\n\r\nexport const projectsRelations = relations(projects, ({ one, many }) => ({\r\n  persona: one(personas, {\r\n    fields: [projects.personaId],\r\n    references: [personas.personaId],\r\n  }),\r\n  weights: many(weights),\r\n  steps: many(steps),\r\n}));\r\n\r\nexport const personasRelations = relations(personas, ({ many }) => ({\r\n  projects: many(projects),\r\n}));\r\n\r\nexport const stepsRelations = relations(steps, ({ one, many }) => ({\r\n  project: one(projects, {\r\n    fields: [steps.projectId],\r\n    references: [projects.projectId],\r\n  }),\r\n  tasks: many(tasks),\r\n}));\r\n\r\nexport const tasksRelations = relations(tasks, ({ one }) => ({\r\n  step: one(steps, {\r\n    fields: [tasks.stepId],\r\n    references: [steps.stepId],\r\n  }),\r\n}));\r\n\r\nexport const weightsRelations = relations(weights, ({ one }) => ({\r\n  project: one(projects, {\r\n    fields: [weights.projectId],\r\n    references: [projects.projectId],\r\n  }),\r\n}));\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,oBAAoB,IAAA,0JAAS,EAAC,2JAAQ,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAK,CAAC;QACvE,SAAS,IAAI,2JAAQ,EAAE;YACrB,QAAQ;gBAAC,2JAAQ,CAAC,SAAS;aAAC;YAC5B,YAAY;gBAAC,2JAAQ,CAAC,SAAS;aAAC;QAClC;QACA,SAAS,KAAK,yJAAO;QACrB,OAAO,KAAK,qJAAK;IACnB,CAAC;AAEM,MAAM,oBAAoB,IAAA,0JAAS,EAAC,2JAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;QAClE,UAAU,KAAK,2JAAQ;IACzB,CAAC;AAEM,MAAM,iBAAiB,IAAA,0JAAS,EAAC,qJAAK,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAK,CAAC;QACjE,SAAS,IAAI,2JAAQ,EAAE;YACrB,QAAQ;gBAAC,qJAAK,CAAC,SAAS;aAAC;YACzB,YAAY;gBAAC,2JAAQ,CAAC,SAAS;aAAC;QAClC;QACA,OAAO,KAAK,qJAAK;IACnB,CAAC;AAEM,MAAM,iBAAiB,IAAA,0JAAS,EAAC,qJAAK,EAAE,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QAC3D,MAAM,IAAI,qJAAK,EAAE;YACf,QAAQ;gBAAC,qJAAK,CAAC,MAAM;aAAC;YACtB,YAAY;gBAAC,qJAAK,CAAC,MAAM;aAAC;QAC5B;IACF,CAAC;AAEM,MAAM,mBAAmB,IAAA,0JAAS,EAAC,yJAAO,EAAE,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QAC/D,SAAS,IAAI,2JAAQ,EAAE;YACrB,QAAQ;gBAAC,yJAAO,CAAC,SAAS;aAAC;YAC3B,YAAY;gBAAC,2JAAQ,CAAC,SAAS;aAAC;QAClC;IACF,CAAC","debugId":null}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/schema/index.ts"],"sourcesContent":["export * from \"./personas\";\r\nexport * from \"./projects\";\r\nexport * from \"./steps\";\r\nexport * from \"./tasks\";\r\nexport * from \"./weights\";\r\nexport * from \"./relations\";\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 369, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/lib/db/db.ts"],"sourcesContent":["import { drizzle } from \"drizzle-orm/postgres-js\";\r\nimport postgres from \"postgres\";\r\nimport * as schema from \"./schema\";\r\n\r\nconst client =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? postgres({\r\n        host: process.env.DB_HOST,  // Private IP を指定 (例: 10.23.45.67)\r\n        port: 5432,\r\n        user: process.env.DB_USER,\r\n        password: process.env.DB_PASSWORD,\r\n        database: process.env.DB_NAME,\r\n      })\r\n    : postgres(process.env.DATABASE_URL!);\r\n\r\n\r\nexport const db = drizzle(client, { schema });\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;AAEA,MAAM,SACJ,sCACI,0BAOA,IAAA,qJAAQ,EAAC,QAAQ,GAAG,CAAC,YAAY;AAGhC,MAAM,KAAK,IAAA,uKAAO,EAAC,QAAQ;IAAE,QAAA;AAAO","debugId":null}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/fork_lazy-bear/src/app/api/personas/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { db } from \"../../lib/db/db\";\r\nimport { personas } from \"../../lib/db/schema\";\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const body = await request.json();\r\n    const { weekdayHours, weekendHours, learningPattern } = body;\r\n\r\n    if (!weekdayHours || !weekendHours) {\r\n      return NextResponse.json(\r\n        { error: \"平日と週末の学習時間は必須です\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (\r\n      weekdayHours < 0 ||\r\n      weekdayHours > 24 ||\r\n      weekendHours < 0 ||\r\n      weekendHours > 24\r\n    ) {\r\n      return NextResponse.json(\r\n        { error: \"学習時間は0〜24時間の範囲で入力してください\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const newPersona = await db\r\n      .insert(personas)\r\n      .values({\r\n        weekdayHours: weekdayHours.toString(),\r\n        weekendHours: weekendHours.toString(),\r\n        learningPattern: learningPattern || \"インプット先行パターン\",\r\n      })\r\n      .returning();\r\n\r\n    return NextResponse.json(\r\n      {\r\n        message: \"ペルソナが正常に作成されました\",\r\n        personas: newPersona[0],\r\n      },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"ペルソナ作成エラー:\", error);\r\n    return NextResponse.json(\r\n      { error: \"ペルソナの作成に失敗しました\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,YAAY,EAAE,YAAY,EAAE,eAAe,EAAE,GAAG;QAExD,IAAI,CAAC,gBAAgB,CAAC,cAAc;YAClC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkB,GAC3B;gBAAE,QAAQ;YAAI;QAElB;QAEA,IACE,eAAe,KACf,eAAe,MACf,eAAe,KACf,eAAe,IACf;YACA,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,aAAa,MAAM,qIAAE,CACxB,MAAM,CAAC,2JAAQ,EACf,MAAM,CAAC;YACN,cAAc,aAAa,QAAQ;YACnC,cAAc,aAAa,QAAQ;YACnC,iBAAiB,mBAAmB;QACtC,GACC,SAAS;QAEZ,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,UAAU,UAAU,CAAC,EAAE;QACzB,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiB,GAC1B;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}