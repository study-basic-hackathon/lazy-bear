# プロンプト設計におけるContext不足の改善指針

## 1. 課題点

**「Contextの設計が整備途上」であること。**

現状のプロンプト設計:</br>
\*\*Task（やるべきこと）**と**References（根拠情報）\*\*は十分に与えられている一方で、\*\*Context（文脈情報）\*\*が不足している。
その結果、AIの出力が曖昧になり、期待した一貫性・深みのある応答が得られていない。

## 2. プロンプト全体の設計思想（TCREIフレームワーク）

### TCREIとは

**Thoughtfully Create Really Excellent Inputs**</br>
（思慮深く、本当に優秀な入力を作成する）

5つのステップで構成される：

1. **Task** – タスクを特定する (何をしたいのか明確に)
2. **Context** – 必要な文脈を含める (背景情報を提供)
3. **References** – 根拠や参考資料を与える (根拠となる情報)
4. **Evaluate** – 出力の質を確認する (回答の質を確認)
5. **Iterate** – 改善を繰り返す (改善を繰り返す)

### 実例：`steps/generate-steps.ts`

* **Task**:
  `userPrompt`の「以下の情報に基づいて、学習ステップを生成してください。」
* **Context**:
  `systemInstruction`
* **References**:
  `userPrompt`で渡す資格名・出題範囲・配点
* **Evaluate / Iterate**:
  ユーザによる確認や繰り返し修正。本システムでは「何度も訂正を依頼する機能」を想定していないため、考慮外。

👉 **現状の課題点は「Context」**。
`systemInstruction`の設計が整備途上で、AIの推論が曖昧になっている。

## 3. なぜプロンプト設計においてContextが不足しているか

* **原因1: 役割演技プロンプトの不必要性**</br>
  AIの性能が上がり、わざわざ「あなたは~~~です」と指定しなくても自律的に役割を推測するようになった。

* **原因2: マニュアル型設計の限界**</br>
  「こういう場合はこう答えろ」という既知の問題には強いが、複数のペルソナ観点が必要な問題には対応が難しい。

* **結果**</br>
  Contextを「役割付与」や「マニュアル指示」に依存しており、\*\*抽象的な思考フレーム（設計憲法）\*\*が欠けているため、AIの推論が浅くなる。

## 4. Contextを設計する際のフレームワーク（コグニティブ・デザイン）

### コグニティブ・デザインの5要素

1. **前提 (Premise)** – 疑う余地のない事実や価値観
2. **状況 (Situation)** – 現在起きていること・変数
3. **目的 (Purpose)** – 目指す具体的ゴール
4. **動機 (Motive)** – そのゴールを目指す根本理由
5. **制約 (Constraint)** – 守るべきルールや限界

### 実例（マニュアル型 vs コグニティブ・デザイン）

**NG例（旧来の指示）**

```md
あなたはプロのコンサルタントです。AIチャットボットを導入するための企画書を作成してください。
```

→ 曖昧で凡庸なアウトプットしか得られない。

**OK例（コグニティブ・デザイン）**

```md
# 思考のレンズ

## 前提 (Premise):
- ビジネスの最優先事項は顧客満足度。
- 経営陣はROIを重視し、データを好む。

## 状況 (Situation):
- 問い合わせ件数が前期比30%増加。
- サポート負荷が増大し、顧客満足度が低下。
- 競合はAI導入済み。

## 目的 (Purpose):
- 経営会議で500万円の予算承認を得る。
- 説得力のある企画書を作成する。

## 動機 (Motive):
- コスト削減ではなく、人間スタッフを高度業務へ集中させたい。
- 顧客満足度と従業員満足度を両立させたい。

## 制約 (Constraint):
- 専門用語を避け、誰でも理解できる文章。
- サポート部門を否定せず、支援的な文脈で書く。
- Markdown形式で出力すること。
```

👉 これにより、AIは単なる事実の羅列ではなく、**価値観と一貫性を持ったストーリー**を生成できる。

# まとめ

* **課題点**: Context設計が整備途上のため
* **原因**: ロールプレイ依存・マニュアル指示型の限界
* **解決策**: コグニティブ・デザインを導入し、「思考のレンズ」を設計する
* **効果**: AIは未知の問題でも組織の原則に基づき、一貫性のある深いアウトプットを返せるようになる